<UserControl x:Class="Particular.ServiceInsight.Desktop.Saga.SagaContentViewer"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="clr-namespace:Particular.ServiceInsight.Desktop.Controls"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:saga="clr-namespace:Particular.ServiceInsight.Desktop.Saga"
             xmlns:folding="clr-namespace:ICSharpCode.AvalonEdit.Folding;assembly=ICSharpCode.AvalonEdit"
             Width="800"
             Height="400"
             Background="#FF252526"
             d:DataContext="{d:DesignInstance saga:ContentViewer}"
             d:DesignHeight="500"
             d:DesignWidth="900"
             mc:Ignorable="d">

    <UserControl.Resources>
        
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="DarkTheme.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <SolidColorBrush x:Key="DarkBackground" Color="#FF252526" />
            <Style TargetType="{x:Type controls:MvvmTextEditor}">
                <Setter Property="Background" Value="#FF252526" />
                <Setter Property="Foreground" Value="#C8C8C8" />
            </Style>
            <Style TargetType="{x:Type folding:FoldingMargin}">
                <Setter Property="FoldingMarkerBrush" Value="#A5A5A5" />
                <Setter Property="FoldingMarkerBackgroundBrush" Value="{StaticResource DarkBackground}" />
                <Setter Property="SelectedFoldingMarkerBrush" Value="#E6E6E6" />
                <Setter Property="SelectedFoldingMarkerBackgroundBrush" Value="{StaticResource DarkBackground}" />
            </Style>
            
            <!--  Background  -->
            <GeometryDrawing x:Key="BackgroundBrush"
                             Brush="{StaticResource DarkBackground}"
                             Geometry="F1 M 1518.92,121.53L 288.999,121.53L 288.999,812.536L 1518.92,812.536L 1518.92,121.53 Z " />
            <!--  End of Background  -->

            <!--  Close  -->
            <GeometryDrawing x:Key="CloseGlyph"
                             Brush="#FFFFFFFF"
                             Geometry="F1 M 1504.61,148.035L 1500.54,143.968L 1504.61,139.9L 1501.34,136.628L 1497.27,140.695L 1493.21,136.628L 1489.93,139.9L 1494,143.968L 1489.93,148.035L 1493.21,151.307L 1497.27,147.24L 1501.34,151.307L 1504.61,148.035 Z " />
            <!--  End of Close  -->

            <DrawingBrush x:Key="Icon" Stretch="Uniform">
                <DrawingBrush.Drawing>
                    <DrawingGroup>
                        <DrawingGroup.Children>
                            <!--  Left Icon  -->
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 317.88,157.683C 318.568,157.683 319.089,157.975 319.464,158.558C 319.819,159.142 320.006,159.934 320.006,160.893C 320.006,161.893 319.819,162.664 319.464,163.248C 319.089,163.832 318.568,164.124 317.88,164.124C 317.192,164.124 316.671,163.832 316.296,163.248C 315.921,162.664 315.754,161.893 315.754,160.893C 315.754,159.934 315.921,159.142 316.296,158.558C 316.671,157.975 317.192,157.683 317.88,157.683 Z M 316.692,162.206L 318.797,158.913C 318.651,158.683 318.506,158.517 318.36,158.433C 318.193,158.35 318.047,158.287 317.88,158.287C 317.443,158.287 317.109,158.537 316.88,159.017C 316.651,159.517 316.546,160.122 316.546,160.851C 316.546,161.039 316.546,161.226 316.567,161.414C 316.567,161.622 316.609,161.872 316.692,162.206 Z M 319.068,159.642L 316.984,162.935C 317.088,163.144 317.213,163.29 317.359,163.373C 317.505,163.477 317.672,163.519 317.859,163.519C 318.339,163.519 318.693,163.248 318.902,162.685C 319.11,162.143 319.214,161.518 319.214,160.83C 319.214,160.413 319.152,160.017 319.068,159.642 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 323.513,163.331L 323.513,158.642C 323.283,158.829 323.075,158.975 322.867,159.1C 322.658,159.225 322.366,159.35 322.012,159.475L 322.012,158.808C 322.575,158.579 323.075,158.266 323.513,157.87L 324.221,157.87L 324.221,163.331L 325.68,163.331L 325.68,163.936L 322.012,163.936L 322.012,163.331L 323.513,163.331 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 329.479,157.683C 330.166,157.683 330.688,157.975 331.063,158.558C 331.417,159.142 331.605,159.934 331.605,160.893C 331.605,161.893 331.417,162.664 331.063,163.248C 330.688,163.832 330.166,164.124 329.479,164.124C 328.791,164.124 328.27,163.832 327.895,163.248C 327.519,162.664 327.353,161.893 327.353,160.893C 327.353,159.934 327.519,159.142 327.895,158.558C 328.27,157.975 328.791,157.683 329.479,157.683 Z M 328.291,162.206L 330.396,158.913C 330.25,158.683 330.104,158.517 329.958,158.433C 329.791,158.35 329.645,158.287 329.479,158.287C 329.041,158.287 328.707,158.537 328.478,159.017C 328.249,159.517 328.145,160.122 328.145,160.851C 328.145,161.039 328.145,161.226 328.165,161.414C 328.165,161.622 328.207,161.872 328.291,162.206 Z M 330.667,159.642L 328.582,162.935C 328.687,163.144 328.812,163.29 328.958,163.373C 329.103,163.477 329.27,163.519 329.458,163.519C 329.937,163.519 330.292,163.248 330.5,162.685C 330.708,162.143 330.813,161.518 330.813,160.83C 330.813,160.413 330.75,160.017 330.667,159.642 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 335.111,163.331L 335.111,158.642C 334.882,158.829 334.673,158.975 334.465,159.1C 334.256,159.225 333.965,159.35 333.61,159.475L 333.61,158.808C 334.173,158.579 334.673,158.266 335.111,157.87L 335.82,157.87L 335.82,163.331L 337.279,163.331L 337.279,163.936L 333.61,163.936L 333.61,163.331L 335.111,163.331 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 340.91,163.331L 340.91,158.642C 340.681,158.829 340.473,158.975 340.264,159.1C 340.056,159.225 339.764,159.35 339.41,159.475L 339.41,158.808C 339.972,158.579 340.473,158.266 340.91,157.87L 341.619,157.87L 341.619,163.331L 343.078,163.331L 343.078,163.936L 339.41,163.936L 339.41,163.331L 340.91,163.331 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 317.714,174.466L 317.714,169.776C 317.484,169.964 317.276,170.11 317.067,170.235C 316.859,170.36 316.567,170.485 316.213,170.61L 316.213,169.943C 316.776,169.714 317.276,169.401 317.714,169.005L 318.422,169.005L 318.422,174.466L 319.881,174.466L 319.881,175.07L 316.213,175.07L 316.213,174.466L 317.714,174.466 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 323.513,174.466L 323.513,169.776C 323.283,169.964 323.075,170.11 322.867,170.235C 322.658,170.36 322.366,170.485 322.012,170.61L 322.012,169.943C 322.575,169.714 323.075,169.401 323.513,169.005L 324.221,169.005L 324.221,174.466L 325.68,174.466L 325.68,175.07L 322.012,175.07L 322.012,174.466L 323.513,174.466 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 329.312,174.466L 329.312,169.776C 329.083,169.964 328.874,170.11 328.666,170.235C 328.457,170.36 328.165,170.485 327.811,170.61L 327.811,169.943C 328.374,169.714 328.874,169.401 329.312,169.005L 330.021,169.005L 330.021,174.466L 331.48,174.466L 331.48,175.07L 327.811,175.07L 327.811,174.466L 329.312,174.466 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 335.278,168.817C 335.966,168.817 336.487,169.109 336.862,169.693C 337.216,170.276 337.404,171.068 337.404,172.027C 337.404,173.028 337.216,173.799 336.862,174.383C 336.487,174.966 335.966,175.258 335.278,175.258C 334.59,175.258 334.069,174.966 333.694,174.383C 333.319,173.799 333.152,173.028 333.152,172.027C 333.152,171.068 333.319,170.276 333.694,169.693C 334.069,169.109 334.59,168.817 335.278,168.817 Z M 334.09,173.34L 336.195,170.047C 336.049,169.818 335.903,169.651 335.757,169.568C 335.59,169.484 335.445,169.422 335.278,169.422C 334.84,169.422 334.507,169.672 334.277,170.151C 334.048,170.651 333.944,171.256 333.944,171.985C 333.944,172.173 333.944,172.361 333.965,172.548C 333.965,172.757 334.006,173.007 334.09,173.34 Z M 336.466,170.777L 334.382,174.07C 334.486,174.278 334.611,174.424 334.757,174.508C 334.903,174.612 335.069,174.653 335.257,174.653C 335.736,174.653 336.091,174.383 336.299,173.82C 336.508,173.278 336.612,172.652 336.612,171.965C 336.612,171.548 336.549,171.152 336.466,170.777 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 340.91,174.466L 340.91,169.776C 340.681,169.964 340.473,170.11 340.264,170.235C 340.056,170.36 339.764,170.485 339.41,170.61L 339.41,169.943C 339.972,169.714 340.473,169.401 340.91,169.005L 341.619,169.005L 341.619,174.466L 343.078,174.466L 343.078,175.07L 339.41,175.07L 339.41,174.466L 340.91,174.466 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 317.714,185.6L 317.714,180.911C 317.484,181.098 317.276,181.244 317.067,181.369C 316.859,181.494 316.567,181.619 316.213,181.744L 316.213,181.077C 316.776,180.848 317.276,180.535 317.714,180.139L 318.422,180.139L 318.422,185.6L 319.881,185.6L 319.881,186.205L 316.213,186.205L 316.213,185.6L 317.714,185.6 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 323.679,179.952C 324.367,179.952 324.888,180.244 325.264,180.827C 325.618,181.411 325.805,182.203 325.805,183.162C 325.805,184.162 325.618,184.933 325.264,185.517C 324.888,186.101 324.367,186.393 323.679,186.393C 322.992,186.393 322.471,186.101 322.095,185.517C 321.72,184.933 321.553,184.162 321.553,183.162C 321.553,182.203 321.72,181.411 322.095,180.827C 322.471,180.244 322.992,179.952 323.679,179.952 Z M 322.491,184.475L 324.597,181.182C 324.451,180.952 324.305,180.786 324.159,180.702C 323.992,180.619 323.846,180.556 323.679,180.556C 323.242,180.556 322.908,180.806 322.679,181.286C 322.45,181.786 322.345,182.391 322.345,183.12C 322.345,183.308 322.345,183.495 322.366,183.683C 322.366,183.891 322.408,184.141 322.491,184.475 Z M 324.868,181.911L 322.783,185.204C 322.887,185.413 323.012,185.559 323.158,185.642C 323.304,185.746 323.471,185.788 323.659,185.788C 324.138,185.788 324.492,185.517 324.701,184.954C 324.909,184.412 325.013,183.787 325.013,183.099C 325.013,182.682 324.951,182.286 324.868,181.911 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 329.312,185.6L 329.312,180.911C 329.083,181.098 328.874,181.244 328.666,181.369C 328.457,181.494 328.165,181.619 327.811,181.744L 327.811,181.077C 328.374,180.848 328.874,180.535 329.312,180.139L 330.021,180.139L 330.021,185.6L 331.48,185.6L 331.48,186.205L 327.811,186.205L 327.811,185.6L 329.312,185.6 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 335.278,179.952C 335.966,179.952 336.487,180.244 336.862,180.827C 337.216,181.411 337.404,182.203 337.404,183.162C 337.404,184.162 337.216,184.933 336.862,185.517C 336.487,186.101 335.966,186.393 335.278,186.393C 334.59,186.393 334.069,186.101 333.694,185.517C 333.319,184.933 333.152,184.162 333.152,183.162C 333.152,182.203 333.319,181.411 333.694,180.827C 334.069,180.244 334.59,179.952 335.278,179.952 Z M 334.09,184.475L 336.195,181.182C 336.049,180.952 335.903,180.786 335.757,180.702C 335.59,180.619 335.445,180.556 335.278,180.556C 334.84,180.556 334.507,180.806 334.277,181.286C 334.048,181.786 333.944,182.391 333.944,183.12C 333.944,183.308 333.944,183.495 333.965,183.683C 333.965,183.891 334.006,184.141 334.09,184.475 Z M 336.466,181.911L 334.382,185.204C 334.486,185.413 334.611,185.559 334.757,185.642C 334.903,185.746 335.069,185.788 335.257,185.788C 335.736,185.788 336.091,185.517 336.299,184.954C 336.508,184.412 336.612,183.787 336.612,183.099C 336.612,182.682 336.549,182.286 336.466,181.911 Z " />
                            <GeometryDrawing Brush="#FFB3B3B3" Geometry="F1 M 341.077,179.952C 341.765,179.952 342.286,180.244 342.661,180.827C 343.015,181.411 343.203,182.203 343.203,183.162C 343.203,184.162 343.015,184.933 342.661,185.517C 342.286,186.101 341.765,186.393 341.077,186.393C 340.389,186.393 339.868,186.101 339.493,185.517C 339.118,184.933 338.951,184.162 338.951,183.162C 338.951,182.203 339.118,181.411 339.493,180.827C 339.868,180.244 340.389,179.952 341.077,179.952 Z M 339.889,184.475L 341.994,181.182C 341.848,180.952 341.702,180.786 341.556,180.702C 341.39,180.619 341.244,180.556 341.077,180.556C 340.639,180.556 340.306,180.806 340.077,181.286C 339.847,181.786 339.743,182.391 339.743,183.12C 339.743,183.308 339.743,183.495 339.764,183.683C 339.764,183.891 339.806,184.141 339.889,184.475 Z M 342.265,181.911L 340.181,185.204C 340.285,185.413 340.41,185.559 340.556,185.642C 340.702,185.746 340.869,185.788 341.056,185.788C 341.536,185.788 341.89,185.517 342.098,184.954C 342.307,184.412 342.411,183.787 342.411,183.099C 342.411,182.682 342.348,182.286 342.265,181.911 Z " />
                            <!--  End of Left Icon  -->
                        </DrawingGroup.Children>
                    </DrawingGroup>
                </DrawingBrush.Drawing>
            </DrawingBrush>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid Margin="10">

        <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="30" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="16" />
        </Grid.ColumnDefinitions>

        <Grid.Background>
            <DrawingBrush Drawing="{StaticResource BackgroundBrush}" />
        </Grid.Background>
        <Rectangle Grid.Row="0"
                   Grid.Column="0"
                   Width="16"
                   Height="16"
                   Fill="{StaticResource Icon}" />
        <TextBlock Grid.Row="0"
                   Grid.Column="1"
                   VerticalAlignment="Center"
                   FontFamily="{StaticResource CaptionFontFamily}"
                   FontSize="{StaticResource CaptionFontSize}"
                   Foreground="White"
                   Text="{Binding DisplayTitle}"
                   TextAlignment="Left" />
        <Image Grid.Row="0"
               Grid.Column="2"
               Width="10"
               Height="10"
               MouseDown="OnCloseGlyphClicked">
            <Image.Source>
                <DrawingImage Drawing="{StaticResource CloseGlyph}" />
            </Image.Source>
        </Image>
        <controls:MvvmTextEditor x:Name="document"
                                 Grid.Row="1"
                                 Grid.Column="0"
                                 Grid.ColumnSpan="3"
                                 FontFamily="{StaticResource MessageBodyFontFamily}"
                                 FontSize="{StaticResource MessageBodyFontSize}"
                                 IsReadOnly="True"
                                 SnapsToDevicePixels="True"
                                 SyntaxHighlighting="{Binding SyntaxHighlighting,
                                                              Converter={StaticResource TextEditorHighlighterConverter}}"
                                 Text="{Binding Data}"
                                 UseLayoutRounding="True">
            <controls:MvvmTextEditor.ContextMenu>
                <ContextMenu>
                    <MenuItem Command="Copy">
                        <MenuItem.Icon>
                            <Image Source="/Images/Copy.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                </ContextMenu>
            </controls:MvvmTextEditor.ContextMenu>
        </controls:MvvmTextEditor>
    </Grid>
</UserControl>
